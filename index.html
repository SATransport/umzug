<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Umzugsanfrage bei SA Transport Augsburg">
  <title>Umzugsanfrage | SA Transport Augsburg</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'jockey': ['"Jockey One"', 'sans-serif'],
          },
        },
      },
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Jockey+One&display=swap" as="style">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jockey+One&display=swap" media="print" onload="this.media='all'">
  <style>
    /* Локальные стили для элементов, которые сложно сделать в Tailwind */
    .icon { transition: transform 0.2s; }
    .icon:hover { transform: scale(1.1); }
    #submitBtn:disabled { opacity: 0.7; cursor: not-allowed; }
  </style>
  <!-- PWA Manifest -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlVtenVnc2FuZnJhZ2UiLAogICJzaG9ydF9uYW1lIjogIlVtenVnIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmZmZmZmYiLAogICJpY29ucyI6IFt7CiAgICAic3JjIjogImltYWdlcy9pY29ucy9pY29uLTE5MngxOTIucG5nIiwKICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICJ0eXBlIjogImltYWdlL3BuZyIKICB9XQp9">
</head>
<body class="min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 flex items-center justify-center p-4 font-jockey">
  <div class="backdrop-blur-lg bg-white/80 max-w-2xl w-full p-6 rounded-2xl shadow-2xl space-y-4 border border-white">
    <!-- Заголовок и переключатель языка -->
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-bold text-gray-800" id="title">Umzugsanfrage</h1>
      <div class="flex space-x-2">
        <button onclick="setLang('de')" aria-label="Deutsch" class="w-6 h-6">
          <img src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoQABAABUB8JbACdDBASEI3AAAD+5i8Aryj/4W1VQA=" alt="DE" width="24" height="24" loading="lazy">
        </button>
        <button onclick="setLang('en')" aria-label="English" class="w-6 h-6">
          <img src="data:image/webp;base64,UklGRkYAAABXRUJQVlA4IDoAAAAwAQCdASoQABAABUB8JbACdDBASEI3AAAD+5i8Aryj/4W1VQA=" alt="EN" width="24" height="24" loading="lazy">
        </button>
        <!-- Остальные флаги в base64 -->
      </div>
    </div>

    <!-- Логотип Kleinanzeigen -->
    <a href="https://www.kleinanzeigen.de/s-bestandsliste.html?userId=142488937" target="_blank" rel="noopener noreferrer">
      <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAABkCAYAAADDhn8LAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QkYCTE..." alt="Kleinanzeigen" class="mx-auto my-2 h-10" width="120" height="40" loading="lazy">
    </a>

    <!-- Форма -->
    <form id="movingForm" class="space-y-4">
      <!-- Все поля формы как в оригинале -->
      
      <button type="submit" class="mt-6 w-full bg-green-500 text-white p-2 rounded hover:bg-green-600 transition-colors" id="submitBtn">
        Absenden
      </button>
    </form>
  </div>

  <!-- Весь JavaScript в одном теге -->
  <script>
    // Переводы
    const translations = {
      de: { title: "Umzugsanfrage", labelA: "Punkt A (Adresse)", /* ... */ },
      en: { title: "Moving Request", labelA: "Point A (Address)", /* ... */ },
      ru: { title: "Заявка на переезд", labelA: "Точка А (адрес)", /* ... */ },
      ua: { title: "Запит на переїзд", labelA: "Точка А (адреса)", /* ... */ },
      ar: { title: "طلب نقل", labelA: "النقطة أ (العنوان)", /* ... */ }
    };

    // Установка языка
    function setLang(lang) {
      localStorage.setItem('lang', lang);
      const t = translations[lang];
      for (const key in t) {
        const el = document.getElementById(key);
        if (el) el.textContent = t[key];
      }
    }

    // Обработка формы
    document.getElementById('movingForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const form = e.target;
      const btn = form.querySelector('button[type="submit"]');
      
      btn.disabled = true;
      btn.innerHTML = '<span class="animate-pulse">Sending...</span>';
      
      try {
        const response = await fetch(form.action, {
          method: 'POST',
          body: new FormData(form)
        });
        
        if (response.ok) {
          alert('Anfrage erfolgreich gesendet!');
          form.reset();
        }
      } catch (error) {
        alert('Fehler: ' + error.message);
      } finally {
        btn.disabled = false;
        btn.textContent = translations[localStorage.getItem('lang') || 'de'].submitBtn;
      }
    });

    // Инициализация языка
    if (localStorage.getItem('lang')) {
      setLang(localStorage.getItem('lang'));
    }

    // Регистрация Service Worker для PWA
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('SW registered:', reg))
        .catch(err => console.log('SW registration failed:', err));
    }
  </script>
</body>
</html>
